<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dart Score Counter</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        h1 { font-size: 3rem; }
        .player { font-size: 3rem; margin: 10px; }
        .score { font-size: 5rem; color: green; }
        .turn { font-size: 2rem; color: red; }
        .checkout { font-size: 1.5rem; color: blue; }
        button { font-size: 2rem; padding: 10px; margin: 10px; }
        select { font-size: 2rem; padding: 5px; margin: 10px; }
    </style>
</head>
<body>
    <h1>Dart Score System</h1>

    <p class="player">Player 1: <span id="p1-score">501</span></p>
    <p class="player">Player 2: <span id="p2-score">501</span></p>
    <p class="turn">Current Turn: <span id="turn">Player 1</span></p>
    <p class="checkout">Checkout Options: <span id="checkout">-</span></p>

    <label for="startScore">Choose Starting Score:</label>
    <select id="startScore">
        <option value="301">301</option>
        <option value="501" selected>501</option>
        <option value="701">701</option>
    </select>
    <button onclick="setStartingScore()">Set Score</button>

    <button onclick="throwDart()">Throw Dart</button>
    <button onclick="resetGame()">Reset Game</button>

    <script>
        function throwDart() {
            fetch("/throw")
            .then(response => response.json())
            .then(data => {
                document.getElementById("p1-score").innerText = data.players[0].score;
                document.getElementById("p2-score").innerText = data.players[1].score;
                document.getElementById("turn").innerText = data.turn;
                document.getElementById("checkout").innerText = data.checkout.join(" | ");
            })
            .catch(err => console.error(err));
        }

        function resetGame() {
            fetch("/reset")
            .then(response => response.json())
            .then(data => {
                document.getElementById("p1-score").innerText = data.players[0].score;
                document.getElementById("p2-score").innerText = data.players[1].score;
                document.getElementById("turn").innerText = data.players[0].name;
                document.getElementById("checkout").innerText = "-";
            })
            .catch(err => console.error(err));
        }

        function setStartingScore() {
            const score = document.getElementById("startScore").value;
            fetch("/set_score", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ score: parseInt(score) })
            })
            .then(response => response.json())
            .then(data => {
                alert("Score set to " + score);
            })
            .catch(err => console.error(err));
        }
    </script>
</body>
</html>
